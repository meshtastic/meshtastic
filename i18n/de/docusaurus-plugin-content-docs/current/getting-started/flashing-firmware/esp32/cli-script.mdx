---
id: cli-script
title: Programmierung mit der Kommandozeile
sidebar_label: Kommandozeilenskript (Erweiterte Benutzer)
sidebar_position: 3
description: Anleitung zum Programmieren der Meshtastic Firmware auf einem ESP32 Gerät.
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import { Icon } from "@iconify/react";
import Link from "@docusaurus/Link";

:::caution
Stellen Sie sicher, dass Sie das Funkgerät nicht einschalten, ohne vorher die Antenne anzuschließen! Sie können sonst den Funkchip beschädigen!
:::

Bevor Sie Ihr Gerät programmieren, überprüfen Sie zunächst die Verbindung mit dem zu programmierenden Gerät. Nachfolgend sind die Schritte aufgeführt, die Sie ausführen können, um die Verbindung zu überprüfen und gegebenenfalls die entsprechenden Treiber zu installieren. Wenn Sie Treiber installieren müssen, starten Sie Ihren Computer anschließend unbedingt neu, um zu überprüfen, ob die Installation abgeschlossen ist.

:::note
The [T-Beam 0.7](/docs/hardware/devices/lilygo/tbeam/?t-beam=0.7) board is an earlier version of the T-Beam board, and due to changes in the design in subsequent iterations this board uses a specific firmware file different from the other T-Beam boards.

`firmware-tbeam0.7-X.X.X.xxxxx.bin` ist die korrekte Firmware. `firmware-tbeam-X.X.X.xxxxx.bin` ist nicht kompatibel. Für alle anderen [T-Beam](/docs/hardware/devices/lilygo/tbeam)-Boards überprüfen Sie den Abschnitt Ressourcen, um die richtige Auswahl zu treffen.
:::

## Kommandozeilenanweisungen

### Benötigte Software installieren

<Tabs
  groupId="operating-system"
  defaultValue="windows"
  values={[
    {
      label: (
        <>
          <Icon icon="mdi:tux" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Linux
        </>
      ),
      value: "linux",
    },
    {
      label: (
        <>
          <Icon icon="mdi:apple" height="1.5rem" style={{ marginRight: "0.25rem" }} /> macOS
        </>
      ),
      value: "macos",
    },
    {
      label: (
        <>
          <Icon icon="mdi:microsoft" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Windows
        </>
      ),
      value: "windows",
    },
  ]}>

<TabItem value="linux">

#### Linux

Überprüfen Sie mit dem folgenden Befehl, ob Sie `python3` und `pip` installiert haben

```shell
python3 --version
pip3 --version
```

Falls `python3` nicht installiert ist, installieren Sie es mit

```shell
sudo apt-get update
sudo apt-get install python3
```

Falls `pip` nicht installiert ist, installieren Sie es mit

```shell
sudo apt-get install python3-pip
```

</TabItem>
  <TabItem value="macos">

#### macOS

OS X wird mit `Python 2.7` installiert, aber nicht `pip`. Im Folgenden wird Homebrew verwendet, um `python3` zu installieren, welches `pip3` enthält. Auf MacOS wird `pip3` anstelle von `pip` verwendet.

:::note
Check if you have Homebrew installed with the following command

```shell
brew -v
```

Wenn es nicht installiert ist, folgen Sie den Anweisungen auf der [Homebrew Website](https://brew.sh) bevor Sie fortfahren.
:::

Überprüfen Sie mit dem folgenden Befehl, ob Sie `python3` und `pip` installiert haben

```shell
python3 --version
pip3 --version
```

Falls `python3` nicht installiert ist, installieren Sie es mit

```shell
brew install python3
```

Prüfen Sie, dass `pip3` neben `python3` installiert wurde

```shell
pip3 -v
```

</TabItem>
  <TabItem value="windows">

#### Windows

- [Python] (https://www.python.org) herunterladen und installieren. Bei der Installation stellen Sie sicher, dass Sie `Python X.Y zu PATH hinzufügen` klicken.
- Laden Sie [Gitbash](https://gitforwindows.org) (oder eine andere geeignete Shell) herunter und installieren Sie es. Führen Sie alle nachfolgenden Befehle von dieser Shell aus aus.

:::note
Confirm installation of `python` & `pip` with the following commands.

```shell
py --version
```

```shell
pip --version
```

:::

</TabItem>
</Tabs>

### Installieren Sie `esptool`

```shell
pip3 install --upgrade esptool
```

### Kommunikation mit Chip bestätigen

<Tabs
  groupId="operating-system"
  defaultValue="windows"
  values={[
    {
      label: (
        <>
          <Icon icon="mdi:tux" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Linux
        </>
      ),
      value: "linux",
    },
    {
      label: (
        <>
          <Icon icon="mdi:apple" height="1.5rem" style={{ marginRight: "0.25rem" }} /> macOS
        </>
      ),
      value: "macos",
    },
    {
      label: (
        <>
          <Icon icon="mdi:microsoft" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Windows
        </>
      ),
      value: "windows",
    },
  ]}>

<TabItem value="linux">

#### Linux

:::important
Unter Linux müssen Sie esptool möglicherweise explizit als .py Skript deklarieren. Verwenden Sie `esptool.py chip_id`.
:::

</TabItem>
<TabItem value="macos">

#### macOS

:::important
Unter macOS müssen Sie esptool möglicherweise explizit als .py Skript deklarieren. Verwenden Sie `esptool.py chip_id`.
:::

</TabItem>
<TabItem value="windows">

#### Windows

:::important
Unter Windows müssen Sie esptool explizit als .py Skript deklarieren. Verwenden Sie `esptool.py chip_id`.
:::

</TabItem>
</Tabs>

Verbinden Sie das Funkgerät über ein USB-Datenkabel mit Ihrem Computer. Bestätigen Sie mit dem folgenden Befehl, dass Ihr Gerät mit Ihrem Computer kommuniziert:

```shell title="Command"
esptool chip_id
```

```shell title="Expected Output"
# Sie sollten etwas ähnliches sehen wie:
mydir$ esptool chip_id
esptool.py v2.6
Found 2 serial ports
Serial port /dev/ttyUSB0
Connecting....
Detecting chip type... ESP32
Chip is ESP32D0WDQ6 (revision 1)
Features: WiFi, BT, Dual Core, 240MHz, VRef calibration in efuse, Coding Scheme None
MAC: 24:6f:28:b5:36:71
Uploading stub...
Running stub...
Stub running...
Warning: ESP32 has no Chip ID. Reading MAC instead.
MAC: 24:6f:28:b5:36:71
Hard resetting via RTS pin...
```

### Firmware herunterladen

1. Gehen Sie zur [Meshtastic-Downloadseite](/downloads), um die neueste Firmware herunterzuladen.
2. Scrollen Sie nach unten zum Abschnitt **Firmware** und wählen Sie je nach Ihren Vorlieben eine der folgenden Optionen aus:

- **Stable herunterladen**: Für stabile, gut getestete Versionen.
- **Alpha herunterladen**: Für neuere, experimentelle Versionen mit den neuesten Funktionen.

3. Sobald Sie zur GitHub Releaseseite weitergeleitet wurden, scrollen Sie nach unten zum Abschnitt „Assets“ und erweitern Sie ihn. Identifizieren Sie die richtige Firmware für Ihr Gerät anhand seiner Architektur (z. B. „firmware-esp32s3“ für ESP32-S3-basierte Geräte wie Heltec V3).
4. Laden Sie die Datei herunter und notieren Sie sich den Download-Speicherort auf Ihrem System (normalerweise in Ihrem Ordner `~/Downloads`).

### Navigieren Sie zum Firmware-Verzeichnis

1. Öffnen Sie ein Terminal und navigieren Sie (`cd`) zu dem Verzeichnis, in das Ihre Firmware heruntergeladen wurde. Der Ordnername entspricht normalerweise der Architektur und Firmware-Version aus der ZIP-Datei. Zum Beispiel:

```shell title="Example"
cd ~/Downloads/firmware-esp32s3-X.X.X.xxxxxxx/
```

:::note
Stellen Sie sicher, dass Sie `esp32s3` und die Versionsnummer durch die Nummern ersetzen, die der heruntergeladenen Datei entsprechen.
:::

### Firmware installieren/aktualisieren

Fahren Sie nun mit den folgenden Anweisungen für Ihr Betriebssystem fort, um die Firmware für Ihr spezielles Board zu installieren oder zu aktualisieren:

:::caution
Achten Sie darauf, die richtige Firmware-Datei für Ihr Board zu installieren. Insbesondere heißt das beliebte „T-BEAM“ Funkgerät von TTGO nicht „TTGO-Lora“ (das ist eine andere Platine). Installieren Sie den Build „TTGO-Lora“ also nicht auf einem TBEAM, da er nicht richtig funktioniert. Wenn Sie die falsche Geräte-Firmware programmieren, scheint der Vorgang möglicherweise erfolgreich abgeschlossen zu sein, das Gerät reagiert jedoch normalerweise nicht mehr und zeigt einen leeren Bildschirm an (falls vorhanden). Versuchen Sie die richtige Version zu programmieren. Bitte beachten Sie, dass diese Geräte zwar recht widerstandsfähig sind und eine Beschädigung nicht immer wahrscheinlich ist, es jedoch aufgrund einer falschen GPIO Pinrichtung zu Schäden an Funkgeräten und Zubehör kommen kann.
:::

<Tabs
  groupId="operating-system"
  defaultValue="windows"
  values={[
    {
      label: (
        <>
          <Icon icon="mdi:tux" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Linux
        </>
      ),
      value: "linux",
    },
    {
      label: (
        <>
          <Icon icon="mdi:apple" height="1.5rem" style={{ marginRight: "0.25rem" }} /> macOS
        </>
      ),
      value: "macos",
    },
    {
      label: (
        <>
          <Icon icon="mdi:microsoft" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Windows
        </>
      ),
      value: "windows",
    },
  ]}>

<TabItem value="linux">

#### Linux

##### Installieren

```shell title="Command"
./device-install.sh -f Firmware-BOARD-VERSION.bin
```

##### Aktualisierung

```shell title="Command"
./device-update.sh -f Firmware-BOARD-VERSION-update.bin
```

</TabItem>
  <TabItem value="macos">

#### macOS

##### Installieren

```shell title="Command"
./device-install.sh -f Firmware-BOARD-VERSION.bin
```

##### Aktualisierung

```shell title="Command"
./device-update.sh -f Firmware-BOARD-VERSION-update.bin
```

</TabItem>
  <TabItem value="windows">

#### Windows

##### Installieren

```shell title="Command"
device-install.bat -f Firmware-BOARD-VERSION.bin
```

##### Aktualisierung

```shell title="Command"
device-update.bat -f Firmware-BOARD-VERSION-update.bin
```

</TabItem>
</Tabs>

Verwenden Sie die Option `--web`, um den eingebetteten [Weboberfläche](/docs/software/web-client/) während der Installation der Firmware einzubinden.

## Gerät anschließen und konfigurieren

Nachdem Sie die Meshtastic Firmware auf das Gerät programmiert haben, können Sie mit der Erstkonfiguration fortfahren.

<div className="indexCtasBody">
  <Link
    className={"button button--outline button--lg cta--button"}
    to={"/docs/getting-started/initial-config"}
  >
    Gerät verbinden und konfigurieren
  </Link>
</div>
