---
id: cli-script
title: Installera med CLI
sidebar_label: CLI-skript (avancerade användare)
sidebar_position: 3
description: Instruktioner för att använda CLI för att installera Meshtastic till en ESP32-enhet.
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import { Icon } from "@iconify/react";
import Link from "@docusaurus/Link";

:::caution
Se till att inte slå på radion utan att först koppla in antennen! Du kan skada radiochippet!
:::

Innan du påbörjar installationen, börja med att kontrollera anslutningen till enheten. Här nedan beskrivs hur du kan göra för att kontrollera anslutningen och, om nödvändigt, installera lämpliga drivrutiner. Om du till slut behöver installera drivrutiner se till att starta om datorn efteråt för att säkerställa att installationen är slutförd.

:::note
The [T-Beam 0.7](/docs/hardware/devices/lilygo/tbeam/?t-beam=0.7) board is an earlier version of the T-Beam board, and due to changes in the design in subsequent iterations this board uses a specific firmware file different from the other T-Beam boards.

`firmware-tbeam0.7-X.X.X.xxxxxxx.bin` är rätt programvara. `firmware-tbeam-X.X.X.xxxxxxx.bin` är inkompatibel. För alla andra [T-Beam](/docs/hardware/devices/lilygo/tbeam)-kort referera till resurssektionen för rätt val.
:::

## Instruktioner för CLI

### Installera nödvändig mjukvara

<Tabs
  groupId="operating-system"
  defaultValue="windows"
  values={[
    {
      label: (
        <>
          <Icon icon="mdi:tux" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Linux
        </>
      ,
      värde: "linux",
    },
    {
      label: (
        <>
          <Icon icon="mdi:apple" height="1.5rem" style={{ marginRight: "0.25rem" }} /> macOS
        </>
      ),
      värde: "macos",
    },
    {
      label: (
        <>
          <Icon icon="mdi:microsoft" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Windows
        </>
      ),
      värde: "windows",
    },
]}>

<TabItem value="linux">

#### Linux

Kontrollera om du har `python3` och `pip` installerat med följande kommando

```shell
python3 --version
pip3 --version
```

Om `python3` inte är installerat, installera med

```shell
sudo apt-get update
sudo apt-get install python3
```

Om `pip` inte är installerat, installera med

```shell
sudo apt-get install python3-pip
```

</TabItem>
<TabItem value="macos">

#### macOS

macOS levereras med `Python 2.7` installerad, men inte `pip`. Följande använder Homebrew för att installera `python3` som innehåller `pip3`. På macOS kommer du att använda `pip3` istället för `pip`.

:::note
Check if you have Homebrew installed with the following command

```shell
brew -v
```

Om brew inte är installerat, följ instruktionerna på [Homebrews webbplats](https://brew.sh) innan du fortsätter.
:::

Kontrollera om du har `python3` och `pip` installerat med följande kommando

```shell
python3 --version
pip3 --version
```

Om `python3` inte är installerat, installera med
install python3

```shell
brew install python3
```

Bekräfta att 'pip3' installerades tillsammans med 'python3'

```shell
pip3 -v
```

</TabItem>
<TabItem value="windows">

#### Windows

- Ladda ner och installera [Python](https://www.python.org). När du installerar, se till att klicka på `Add Python X.Y till PATH`.
- Ladda ner och installera [Gitbash](https://gitforwindows.org) (eller annan lämplig kommandotolk) och kör alla efterföljande kommandon från den kommandotolken.

:::note
Confirm installation of `python` & `pip` with the following commands.

```shell
py --version
```

```shell
pip --version
```

:::

</TabItem>
</Tabs>

### Installera `esptool`

```shell
pip3 install --upgrade esptool
```

### Bekräfta kommunikation med radion

<Tabs
  groupId="operating-system"
  defaultValue="windows"
  values={[
    {
      label: (
        <>
          <Icon icon="mdi:serial-port" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Seriell kommunikation
        </>
      ),
      value: "serial",
    },
    {
      label: (
        <>
          <Icon icon="mdi:bluetooth" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Bluetooth
        </>
      ),
      value: "ble",
    },
    {
      label: (
        <>
          <Icon icon="mdi:internet" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Nätverk
        </>
      ),
      value: "windows",
    },
]}>

<TabItem value="linux">

#### Linux

:::important
På Linux kan du behöva manuellt flagga esptool som ett .py-skript. Använd `esptool.py chip_id`.
:::

</TabItem>
<TabItem value="macos">

#### macOS

:::important
På macOS kan du behöva manuellt flagga esptool som ett .py-skript. Använd `esptool.py chip_id`.
:::

</TabItem>
<TabItem value="windows">

#### Windows

:::important
På Windows måste du manuellt flagga esptool som ett .py-skript. Använd `esptool.py chip_id`.
:::

</TabItem>
</Tabs>

Anslut radion till datorn med hjälp av en data-USB-kabel. Bekräfta att din enhet kommunicerar med din dator med följande kommando:

```shell title="Command"
esptool chip_id
```

```shell title="Expected Output"
# Du bör se ett resultat som liknar detta:
mydir$ esptool chip_id
esptool.py v2.6
Found 2 serial ports
Serial port /dev/ttyUSB0
Connecting....
Detecting chip type... ESP32
Chip is ESP32D0WDQ6 (revision 1)
Features: WiFi, BT, Dual Core, 240MHz, VRef calibration in efuse, Coding Scheme None
MAC: 24:6f:28:b5:36:71
Uploading stub...
Running stub...
Stub running...
Warning: ESP32 has no Chip ID. Reading MAC instead.
MAC: 24:6f:28:b5:36:71
Hard resetting via RTS pin...
```

### Laddar ner programvara

1. Gå till [Meshtastics nedladdningssida](/downloads) för att ladda ner den senaste programvaran.
2. Scrolla ner till **Programvara** avsnittet och välj något av följande, beroende på dina önskemål:

- **Ladda ner Stable**: För stabila, vältestade utgåvor.
- **Ladda ner Alpha**: För nyare, experimentella utgåvor med de senaste funktionerna.

3. När du omdirigeras till GitHub release-sidan, bläddra ner till "Assets"-avsnittet. Identifiera rätt programvara för din enhet genom dess arkitektur (t.ex. 'firmware-esp32s3' för ESP32-S3-baserade enheter så som Heltec V3).
4. Ladda ner filen och notera nedladdningsplatsen på ditt system (vanligtvis i mappen `~/Downloads`).

### Navigera till programvarukatalogen

1. Öppna en kommandotolk och navigera (`cd`) till katalogen där din programvara sparades. Katalognamnet matchar vanligtvis arkitektur- och firmware-versionen från zip-filen. Till exempel:

```shell title="Example"
cd ~/Downloads/firmware-esp32s3-X.X.X.xxxxx/
```

:::note
Se till att ersätta `esp32s3` och versionsnumret med de som motsvarar filen du laddade ner.
:::

### Installera/uppdatera programvara

Fortsätt med instruktionerna nedan för ditt operativsystem för att installera eller uppdatera programvaran för ditt specifika kort:

:::caution
Var mycket noga med att installera rätt programvarufil för ditt kort. I synnerhet kallas den populära T-BEAM-radion från TTGO inte för "TTGO-Lora" (det är ett annat kort). Installera alltså inte "TTGO-Lora" programvaran på en TBEAM, det kommer inte fungera korrekt. Om du installerar felaktig programvara kan det verka som att installationen lyckas, men enheten kommer vanligtvis att bli onåbar och visa en tom skärm (om sådan finns). Försök att installera rätt version. Vänligen notera att, medan dessa enheter är ganska tåliga och skador inte är särskilt sannolika, finns det en risk att radio och kringliggande komponenter tar skada på grund av de felaktiga GPIO-inställningar som kan uppstå vid fel programvara.
:::

<Tabs
  groupId="operating-system"
  defaultValue="windows"
  values={[
    {
      label: (
        <>
          <Icon icon="mdi:serial-port" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Linux
        </>
      ),
      value: "linux",
    },
    {
      label: (
        <>
          <Icon icon="mdi:bluetooth" height="1.5rem" style={{ marginRight: "0.25rem" }} /> macOS
        </>
      ),
      value: "macos",
    },
    {
      label: (
        <>
          <Icon icon="mdi:internet" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Windows
        </>
      ),
      value: "windows",
    },
]}>

<TabItem value="linux">

#### Linux

##### Installera

```shell title="Command"
./device-install.sh -f firmware-BOARD-VERSION.bin
```

##### Uppdatera

```shell title="Command"
./device-update.sh -f firmware-BOARD-VERSION-update.bin
```

</TabItem>
<TabItem value="macos">

#### macOS

##### Installera

```shell title="Command"
./device-install.sh -f firmware-BOARD-VERSION.bin
```

##### Uppdatera

```shell title="Command"
./device-update.sh -f firmware-BOARD-VERSION-update.bin
```

</TabItem>
<TabItem value="windows">

#### Windows

##### Installera

```shell title="Command"
device-install.bat -f firmware-BOARD-VERSION.bin
```

##### Uppdatera

```shell title="Command"
device-update.bat -f firmware-BOARD-VERSION-update.bin
```

</TabItem>
</Tabs>

Använd alternativet `--web` för att inkludera [webbklienten](/docs/software/web-client/) under programvaruinstallationen.

## Anslut och konfigurera enheten

Efter att ha installerat Meshtastic på din enhet, kan du nu gå vidare till de första inställningarna.

<div className="indexCtasBody">
  <Link
    className={"button button--outline button--lg cta--button"}
    to={"/docs/getting-started/initial-config"}
  >
    Anslut och konfigurera enhet
  </Link>
</div>
