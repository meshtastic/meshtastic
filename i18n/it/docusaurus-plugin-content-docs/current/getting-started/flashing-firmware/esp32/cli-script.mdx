---
id: cli-script
title: Flash con la CLI
sidebar_label: Script CLI (Utenti Avanzati)
sidebar_position: 3
description: Istruzioni per l'utilizzo del CLI per flashare il firmware Meshtastic su un dispositivo con chipset ESP32.
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import { Icon } from "@iconify/react";
import Link from "@docusaurus/Link";

:::caution
Assicurati di non accendere la radio senza prima aver attaccato l'antenna! Potresti danneggiare il chip radio!
:::

Prima di flashare il dispositivo, inizia verificando la connettività con il dispositivo che deve essere flashato. Di seguito sono riportati i passaggi che possono essere adottati per verificare la connettività e, se necessario, per installare i driver appropriati. Se hai bisogno di installare i driver assicurati di riavviare il computer in seguito per verificare che l'installazione sia completa.

:::note
The [T-Beam 0.7](/docs/hardware/devices/lilygo/tbeam/?t-beam=0.7) board is an earlier version of the T-Beam board, and due to changes in the design in subsequent iterations this board uses a specific firmware file different from the other T-Beam boards.

`firmware-tbeam0.7-X.X.X.xxxxxxx.bin` è il firmware corretto. `firmware-tbeam-X.X.X.xxxxxxx.bin` è incompatibile. Per tutte le altre schede [T-Beam](/docs/hardware/devices/lilygo/tbeam) rivedere la sezione risorse per la selezione corretta.
:::

## Istruzioni per la Command Line Interface

### Installa Il Software Prerequisito

<Tabs
  groupId="operating-system"
  defaultValue="windows"
  values={[
    {
      label: (
        <>
          <Icon icon="mdi:tux" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Linux
        </>
      ),
      value: "linux",
    },
    {
      label: (
        <>
          <Icon icon="mdi:apple" height="1.5rem" style={{ marginRight: "0.25rem" }} /> macOS
        </>
      ),
      value: "macos",
    },
    {
      label: (
        <>
          <Icon icon="mdi:microsoft" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Windows
        </>
      ),
      value: "windows",
    },
  ]}>

<TabItem value="linux">

#### Linux

Controlla se hai installato `python3` e `pip` con il seguente comando

```shell
python3 --version
pip3 --version
```

Se `python3` non è installato, installa con

```shell
sudo apt-get update
sudo apt-get install python3
```

Se `python3` non è installato, installa con

```shell
sudo apt-get install python3-pip
```

</TabItem>
  <TabItem value="macos">

#### macOS

OS X viene fornito con `Python 2.7` installato, ma non `pip`. Di seguito viene utilizzato Homebrew per installare `python3` che include `pip3`. Su MacOS userai `pip3` invece > di `pip`.

:::note
Check if you have Homebrew installed with the following command

```shell
brew -v
```

Se non è installato, seguire le istruzioni sul [sito web Homebrew](https://brew.sh) prima di continuare.
:::

Controlla se hai installato `python3` e `pip` con il seguente comando

```shell
python3 --version
pip3 --version
```

Se `python3` non è installato, installa con
Install Python3

```shell
brew install python3
```

Conferma che `pip3` è stato installato insieme a `python3`

```shell
pip3 -v
```

</TabItem>
  <TabItem value="windows">

#### Windows

- Scarica e installa [Python](https://www.python.org). Durante l'installazione, assicurati di fare clic su `Aggiungi Python X.Y a PATH`.
- Scarica e installa [Gitbash](https://gitforwindows.org) (o altra shell appropriata) ed esegui tutti i comandi successivi da quella shell.

:::note
Confirm installation of `python` & `pip` with the following commands.

```shell
py --version
```

```shell
pip --version
```

:::

</TabItem>
</Tabs>

### Installa `esptool`

```shell
pip3 install --upgrade esptool
```

### Conferma La Comunicazione Con Il Chip

<Tabs
  groupId="operating-system"
  defaultValue="windows"
  values={[
    {
      label: (
        <>
          <Icon icon="mdi:tux" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Linux
        </>
      ),
      value: "linux",
    },
    {
      label: (
        <>
          <Icon icon="mdi:apple" height="1.5rem" style={{ marginRight: "0.25rem" }} /> macOS
        </>
      ),
      value: "macos",
    },
    {
      label: (
        <>
          <Icon icon="mdi:microsoft" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Windows
        </>
      ),
      value: "windows",
    },
  ]}>

<TabItem value="linux">

#### Linux

:::important
Su Linux, potrebbe essere necessario dichiarare esplicitamente esptool come script .py. Usa `esptool.py chip_id`.
:::

</TabItem>
<TabItem value="macos">

#### macOS

:::important
Su macOS, potrebbe essere necessario dichiarare esplicitamente esptool come script .py. Usa `esptool.py chip_id`.
:::

</TabItem>
<TabItem value="windows">

#### Windows

:::important
Su Windows, è necessario dichiarare esplicitamente esptool come script .py. Usa `esptool.py chip_id`.
:::

</TabItem>
</Tabs>

Collegare la radio al computer utilizzando un cavo USB dati. Conferma che il dispositivo sta parlando con il computer utilizzando il seguente comando:

```shell title="Command"
esptool chip_id
```

```shell title="Expected Output"
# Dovresti vedere un risultato simile a questo:
miacartella$ esptool chip_id
esptool.py v2.6
Found 2 serial ports
Serial port /dev/ttyUSB0
Connecting....
Detecting chip type... ESP32
Chip is ESP32D0WDQ6 (revision 1)
Features: WiFi, BT, Dual Core, 240MHz, VRef calibration in efuse, Coding Scheme None
MAC: 24:6f:28:b5:36:71
Uploading stub...
Running stub...
Stub running...
Warning: ESP32 has no Chip ID. Reading MAC instead.
MAC: 24:6f:28:b5:36:71
Hard resetting via RTS pin...
```

### Scarica Firmware

1. Vai alla [Pagina di download Meshtastic](/downloads) per scaricare l'ultima versione di firmware.
2. Scorri verso il basso nella sezione **Firmware** e seleziona una delle seguenti opzioni a seconda delle tue preferenze:

- **Download Stable**: Per versioni stabili e ben collaudate.
- **Scarica Alpha**: Per le versioni sperimentali più recenti con le ultime funzionalità.

3. Una volta reindirizzato alla pagina di rilascio di GitHub, scorri verso il basso nella sezione "Assets" ed espanderlo. Identifica il firmware corretto per il tuo dispositivo con la sua architettura (ad esempio, `firmware-esp32s3` per dispositivi basati su ESP32-S3 come Heltec V3).
4. Scarica il file e prendi nota della posizione di download sul tuo sistema (di solito nella cartella `~/Downloads`).

### Naviga alla directory del firmware

1. Apri un terminale e naviga (`cd`) nella directory in cui è stato scaricato il firmware. Il nome della cartella corrisponde tipicamente all'architettura e alla versione firmware del file zip. Ad esempio:

```shell title="Example"
cd ~/Downloads/firmware-esp32s3-X.X.xxxxxxx/
```

:::note
Assicurati di sostituire `esp32s3` e il numero di versione con quelli corrispondenti al file scaricato.
:::

### Installa/Aggiorna Firmware

Ora, procedi con le istruzioni seguenti per il tuo sistema operativo per installare o aggiornare il firmware per la scheda specifica:

:::caution
Fai molta attenzione a installare il file del firmware corretto per la tua scheda. In particolare, la popolare radio 'T-BEAM' di TTGO non è chiamata 'TTGO-Lora' (quella è una scheda diversa). Quindi non installare la build 'TTGO-Lora' su un TBEAM, o non funzionerà correttamente. Se si flasha il firmware del dispositivo sbagliato, potrebbe sembrare di aver completato la procedura con successo, ma il dispositivo di solito diventerà non reattivo, visualizzando uno schermo vuoto (se ne è equipaggiato). Tentativo di flashare la versione corretta. Si prega di notare che, sebbene questi dispositivi siano abbastanza resistenti e i danni non siano sempre probabili, esiste la possibilità di danneggiare la radio integrata e le periferiche a causa di una direzione errata dei pin GPIO
:::

<Tabs
  groupId="operating-system"
  defaultValue="windows"
  values={[
    {
      label: (
        <>
          <Icon icon="mdi:tux" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Linux
        </>
      ),
      value: "linux",
    },
    {
      label: (
        <>
          <Icon icon="mdi:apple" height="1.5rem" style={{ marginRight: "0.25rem" }} /> macOS
        </>
      ),
      value: "macos",
    },
    {
      label: (
        <>
          <Icon icon="mdi:microsoft" height="1.5rem" style={{ marginRight: "0.25rem" }} /> Windows
        </>
      ),
      value: "windows",
    },
  ]}>

<TabItem value="linux">

#### Linux

##### Installa

```shell title="Command"
./device-install.sh -f firmware-BOARD-VERSION.bin
```

##### Aggiorna

```shell title="Command"
./device-update.sh -f firmware-BOARD-VERSION-update.bin
```

</TabItem>
  <TabItem value="macos">

#### macOS

##### Installa

```shell title="Command"
./device-install.sh -f firmware-BOARD-VERSION.bin
```

##### Aggiorna

```shell title="Command"
./device-update.sh -f firmware-BOARD-VERSION.bin
```

</TabItem>
  <TabItem value="windows">

#### Windows

##### Installa

```shell title="Command"
device-install.bat -f firmware-BOARD-VERSION.bin
```

##### Aggiorna

```shell title="Command"
device-update.bat -f firmware-BOARD-VERSION.bin
```

</TabItem>
</Tabs>

Utilizzare l'opzione `--web` per includere il [Web Client](/docs/software/web-client/) incorporato durante l'installazione del firmware.

## Connetti e configura il dispositivo

Dopo aver flashato il firmware Meshtastic sul dispositivo, è ora possibile passare alla configurazione iniziale.

<div className="indexCtasBody">
  <Link
    className={"button button--outline button--lg cta--button"}
    to={"/docs/getting-started/initial-config"}
  >
    Connect and Configure Device
  </Link>
</div>
